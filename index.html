<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
  <title>Jahangirnagar University Student Bus Services</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- <script src="js/main.js"></script> -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>


  
      <div id="appbar" class="appbar">
        <h3>JU TRANSPORT- জাবি পরিবহণ
        </h3>
        <!-- add other elements here -->
    </div>
    <div id="map"></div>
    
  
  
  
 <!-- Login Panel -->
<div class="floating-panel login-panel">
  <button id="login-toggle" onclick="toggleLoginForm()">Navigator Login</button>
  <div id="login-form-container" style="display: none; margin-top: 10px;">
    <h3>Navigator Login</h3>
    <form id="login-form">
      <label for="driver-name">Navigator Name:</label>
      <input type="text" id="driver-name" placeholder="Enter your name" required />

      <label for="driver-phone">Phone Number:</label>
      <input type="text" id="driver-phone" placeholder="Enter your phone number" required />

      <label for="driver-email">Email Address:</label>
      <input type="email" id="driver-email" placeholder="Enter your email" required />

      <label for="route-select">Select Route:</label>
      <select id="route-select" required>
        <option value="" disabled selected>Select a route</option>
        <option value="0">Route 1: Airport ↔ JU Campus</option>
        <option value="1">Route 2: Mirpur 12 ↔ JU Campus</option>
        <option value="2">Route 3: Manik Mia Avenue ↔ JU Campus</option>
        <option value="3">Route 4: Khilgaon ↔ JU Campus</option>
        <option value="4">Route 5: Khilghet ↔ JU Campus</option>
        <option value="5">Route 6: Mirpur 14 ↔ JU Campus</option>
        <option value="6">Route 7: Bangabazar ↔ JU Campus</option>
      </select>

      <button type="button" onclick="loginDriver()">Login</button>
      <p class="login-status" id="login-status"></p>
    </form>
  </div>

</div>

<script>
  // Array to hold logged-in users
  const users = [];

  // Toggle the visibility of the login form
  function toggleLoginForm() {
    const formContainer = document.getElementById("login-form-container");
    const toggleButton = document.getElementById("login-toggle");
    if (formContainer.style.display === "none") {
      formContainer.style.display = "block";
      toggleButton.textContent = "Hide Login";
    } else {
      formContainer.style.display = "none";
      toggleButton.textContent = "Navigator Login";
    }
  }

  // Login action
  function loginDriver() {
    const name = document.getElementById("driver-name").value;
    const phone = document.getElementById("driver-phone").value;
    const email = document.getElementById("driver-email").value;
    const route = document.getElementById("route-select").value;

    if (name && phone && email && route) {
      // Add user to the users array
      const user = { name, phone, email, route };
      users.push(user);

      // Update login status and shared locations
      updateLoginStatus(user);
      updateLocationList();
      
      // Clear form fields
      clearFormFields();
    } else {
      document.getElementById("login-status").textContent = "Please fill in all fields!";
      document.getElementById("login-status").style.color = "red";
    }
  }

  // Update login status
  function updateLoginStatus(user) {
    document.getElementById("login-status").textContent =
      `Login successful! Navigator: ${user.name}, Phone: ${user.phone}, Email: ${user.email}, Route: ${user.route}`;
    document.getElementById("login-status").style.color = "green";
  }

  // Update the list of shared locations
  function updateLocationList() {
    const locationList = document.getElementById("location-list");
    locationList.innerHTML = ""; // Clear existing list
    users.forEach(user => {
      const listItem = document.createElement("li");
      listItem.textContent = `${user.name} is on Route ${user.route}`;
      locationList.appendChild(listItem);
    });
  }

  // Clear form fields after login
  function clearFormFields() {
    document.getElementById("driver-name").value = "";
    document.getElementById("driver-phone").value = "";
    document.getElementById("driver-email").value = "";
    document.getElementById("route-select").selectedIndex = 0;
  }
</script>


  

<!-- ✅ Firebase SDK -->
<script type="module">
  // ✅ Import Firebase Services
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, set, onValue, remove, onDisconnect } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  // ✅ 1. Firebase Configuration (UPDATE WITH YOUR CREDENTIALS)
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    databaseURL: "https://your-database-url.firebaseio.com/",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // ✅ 2. Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // ✅ 3. Global Variables
  let userMarkers = {};  // Stores markers for each navigator
  let currentUserRef = null; // Stores current user's Firebase reference
  let userLocationWatcher = null; // Stores geolocation watcher
  let map; // Global map instance

  // ✅ 4. Initialize the Map (Ensure the div #map exists in HTML)
  function initializeMap() {
    map = L.map('map').setView([23.820375, 90.371812], 11);  // Centered on Dhaka
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
  }
  initializeMap();

  // ✅ 5. Function to Start Tracking & Updating Firebase
  function startTracking(name, phone, email, route) {
    if (!name || !phone || !email || route === "") {
      alert("❌ Please fill out all fields!");
      return;
    }

    // Create Firebase Reference for User
    currentUserRef = ref(db, "navigators/" + name);

    // ✅ Remove navigator from Firebase when they disconnect
    onDisconnect(currentUserRef).remove();

    if (navigator.geolocation) {
      userLocationWatcher = navigator.geolocation.watchPosition(
        position => {
          const { latitude, longitude } = position.coords;

          // ✅ Update location in Firebase
          set(currentUserRef, {
            name,
            phone,
            email,
            route,
            latitude,
            longitude,
            timestamp: Date.now()
          });
        },
        error => {
          console.error("❌ GPS Error:", error);
          alert("❌ Please enable GPS and allow location access.");
        },
        { enableHighAccuracy: true }
      );
    } else {
      alert("❌ Geolocation is not supported by this browser.");
    }
  }

  // ✅ 6. Listen for Navigator Location Updates & Show on Map
  onValue(ref(db, "navigators"), snapshot => {
    snapshot.forEach(childSnapshot => {
      const user = childSnapshot.val();
      const { latitude, longitude, name } = user;

      // ✅ Update existing marker instead of creating duplicates
      if (userMarkers[name]) {
        userMarkers[name].setLatLng([latitude, longitude]).update();
      } else {
        // ✅ Create a new marker for new user
        userMarkers[name] = L.marker([latitude, longitude])
          .addTo(map)
          .bindPopup(`<strong>${name}</strong><br>Phone: ${user.phone}<br>Route: ${user.route}`);

        // ✅ Auto-center map on the latest added navigator
        map.setView([latitude, longitude], 12);
      }
    });
  });

  // ✅ 7. Connect Start Tracking to Login Button
  window.loginDriver = function () {
    const name = document.getElementById("driver-name").value.trim();
    const phone = document.getElementById("driver-phone").value.trim();
    const email = document.getElementById("driver-email").value.trim();
    const routeIndex = document.getElementById("route-select").value;

    document.getElementById("login-status").textContent = `✅ Logged in as ${name}. Tracking started.`;

    startTracking(name, phone, email, routeIndex);
  };

</script>




  



  

  <script>

    // Initialize the map
    const map = L.map('map').setView([23.820375, 90.371812], 11); // Centered on Dhaka City

    // Define the base maps
    const openStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });

    const cartoLight = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.carto.com/">CartoDB</a> contributors',
      subdomains: 'abcd',
      maxZoom: 19
    });

    // Add OpenStreetMap as the default base map
    openStreetMap.addTo(map);

    // Create a layer control and add it to the map in the top left corner
    const baseMaps = {
      "OpenStreetMap": openStreetMap,
      "Carto Light": cartoLight
    };

    L.control.layers(baseMaps, null, { position: 'topleft' }).addTo(map); // Position set to 'topleft'




    // Bus Routes for Jahangirnagar University (Updated with more realistic paths)
    const routes = [
      { name: "Route 1", color: "red", coords: [
        [23.854918984, 90.404827705], [23.855038000, 90.404827710], [23.858053362, 90.402267480], [23.860116876, 90.400704915], [23.861783819, 90.400053600], [23.863609804, 90.400053251], [23.867580308, 90.400312968], [23.871353568, 90.400485953], [23.873459224, 90.400615852], [23.874674950, 90.400529942], [23.875905923, 90.400703401], [23.877216463, 90.401050550], [23.878924363, 90.401354266], [23.880116068, 90.401093538], [23.880632514, 90.400919745], [23.880751680, 90.400181433], [23.880433818, 90.398748357], [23.879877574, 90.396490271], [23.879639142, 90.394492682], [23.879559622, 90.393016154], [23.879730719, 90.392485615], [23.880326202, 90.392138150], [23.882231997, 90.391573197], [23.885091279, 90.390616984], [23.887593758, 90.389704042], [23.888804709, 90.389358863], [23.890392667, 90.388967457], [23.892060230, 90.388315405], [23.893807406, 90.387055207], [23.895038504, 90.385838496], [23.896468372, 90.384664910], [23.897342179, 90.382970275], [23.897659796, 90.380928394], [23.897341447, 90.379896490], [23.896904291, 90.378810848], [23.896546639, 90.377985800], [23.896228780, 90.377551648], [23.895712313, 90.377074194], [23.894997242, 90.376423163], [23.894361617, 90.375598405], [23.893964139, 90.373818084], [23.893924134, 90.372254642], [23.894241390, 90.369778765], [23.894320394, 90.368884137], [23.893883279, 90.367798723], [23.893485897, 90.366756742], [23.893247371, 90.365714663], [23.893286813, 90.364585505], [23.892849630, 90.363196185], [23.892293383, 90.362067582], [23.891975590, 90.361633617], [23.891120978, 90.361075484], [23.889889854, 90.360598531], [23.888539761, 90.360165122], [23.887547185, 90.359992044], [23.886792895, 90.359905665], [23.886078436, 90.360123161], [23.885244982, 90.360470944], [23.884094009, 90.360601826], [23.882546209, 90.360429069], [23.881355544, 90.359735283], [23.880442633, 90.358780979], [23.879767764, 90.357652978], [23.878876420, 90.356420774], [23.877606038, 90.354815479], [23.876335843, 90.353470761], [23.875502444, 90.352907077], [23.874389788, 90.352646009], [23.873080108, 90.352690262], [23.871651562, 90.352864785], [23.869786760, 90.353126344], [23.868849082, 90.352951769], [23.868094754, 90.352518190], [23.867062686, 90.352215040], [23.865633784, 90.351738579], [23.864125545, 90.350915043], [23.862299959, 90.349831474], [23.861188809, 90.349094633], [23.860642745, 90.348788919], [23.859372495, 90.348138960], [23.857903620, 90.346664667], [23.855680852, 90.344800709], [23.854323633, 90.343561856], [23.852060895, 90.341697717], [23.850830600, 90.341091313], [23.849481368, 90.340441686], [23.848512449, 90.340135465], [23.847321629, 90.339876244], [23.846488333, 90.340180855], [23.844663546, 90.341614609], [23.843314927, 90.342613790], [23.842243924, 90.343091961], [23.841272127, 90.343047728], [23.840597352, 90.342657765], [23.839724020, 90.341834086], [23.838652253, 90.340793699], [23.837818833, 90.340273819], [23.836614863, 90.340055451], [23.835146532, 90.340100284], [23.833321301, 90.340232220], [23.831813777, 90.340537357], [23.831020535, 90.340971935], [23.830425859, 90.341796737], [23.829751851, 90.342578172], [23.829077814, 90.343229416], [23.828727030, 90.344225893], [23.828330610, 90.345093897], [23.827378481, 90.345311512], [23.826108760, 90.344835246], [23.824997613, 90.343881745], [23.823798798, 90.342666105], [23.822568345, 90.341756091], [23.821219200, 90.341366853], [23.819672086, 90.341541757], [23.818460968, 90.341843487], [23.817032179, 90.341627843], [23.815325615, 90.341022026], [23.813341560, 90.340459926], [23.811116921, 90.340155534], [23.809490021, 90.340374027], [23.808022064, 90.340679081], [23.806832321, 90.341764598], [23.805642679, 90.342849978], [23.804314640, 90.343542886], [23.802489426, 90.343848012], [23.801100839, 90.344065987], [23.799672517, 90.343806870], [23.798521930, 90.343374078], [23.798197108, 90.342533890], [23.797771474, 90.341057831], [23.796845616, 90.340732143], [23.796095129, 90.340646320], [23.794185542, 90.340439917], [23.793027894, 90.340277960], [23.791611080, 90.340350314], [23.790018028, 90.339942448], [23.788655869, 90.339290784], [23.787447928, 90.339200501], [23.786609803, 90.339221543], [23.785955622, 90.338358630], [23.785484198, 90.337492928], [23.784220484, 90.336772942], [23.783537531, 90.336714322], [23.783608984, 90.335996330], [23.784615580, 90.333861229], [23.784651585, 90.333740981], [23.785589898, 90.331047094], [23.786714130, 90.328736690], [23.788100339, 90.327008160], [23.789678987, 90.324818823], [23.790157824, 90.323197571], [23.790046057, 90.321345372], [23.789823502, 90.319255959], [23.789784954, 90.316360606], [23.789894403, 90.314221083], [23.790483728, 90.311094996], [23.792037605, 90.303066203], [23.793379102, 90.298110582], [23.794465181, 90.294251671], [23.794502736, 90.294128266], [23.794953077, 90.291463686], [23.795276587, 90.289477843], [23.795236358, 90.286012199], [23.795159055, 90.283527385], [23.794817027, 90.280627408], [23.794514353, 90.278885840], [23.794136813, 90.277068022], [23.793345482, 90.273195715], [23.793156536, 90.271089150], [23.793604447, 90.269165464], [23.794091241, 90.267765476], [23.795182102, 90.266093625], [23.796538903, 90.264616923], [23.798844710, 90.263374104], [23.800646187, 90.262910667], [23.802841634, 90.262226395], [23.806018959, 90.260529322], [23.808768071, 90.259186816], [23.811587835, 90.257622521], [23.815143792, 90.257369228], [23.815181073, 90.257327279], [23.819095512, 90.257467142], [23.822344341, 90.257676984], [23.827099394, 90.258340213], [23.830131329, 90.258807970], [23.833528367, 90.259111293], [23.833679703, 90.259065401], [23.836382794, 90.258728580], [23.838643877, 90.257979060], [23.841453676, 90.257139746], [23.843464188, 90.256624410], [23.845588788, 90.256747229], [23.847848971, 90.257690579], [23.851180319, 90.258750760], [23.855858284, 90.260947928], [23.858529815, 90.262391541], [23.860344158, 90.263751633], [23.861860144, 90.266048721], [23.863308984, 90.267705070], [23.866489241, 90.271021469], [23.868740693, 90.272186430], [23.870671374, 90.272831498], [23.873328929, 90.273243638], [23.876084108, 90.273276700], [23.877837003, 90.273189710], [23.879911602440878, 90.27291317758662], [23.87980971962057, 90.26875364594618], [23.878913816133057, 90.26791484815537]
      ], schedule: "Airport ↔ JU Campus" },  // Airport to JU Campus
      { name: "Route 2", color: "blue", coords: [
        [23.827988314, 90.364130582], [23.827529734, 90.364195457], [23.826957072, 90.364213698], [23.826131163, 90.364213032], [23.825022923, 90.364261030], [23.823968149, 90.364296242], [23.822870593, 90.364341074], [23.821998389, 90.364476358], [23.821096692, 90.364745366], [23.820195246, 90.365006095], [23.819029028, 90.365325311], [23.817925462, 90.365612728], [23.816472805, 90.365979161], [23.815352350, 90.366297853], [23.814229884, 90.366617413], [23.813172718, 90.366895810], [23.811254022, 90.367418199], [23.810237541, 90.367677508], [23.807640258, 90.368410004], [23.807223484, 90.368515778], [23.807040605, 90.368385577], [23.806890360, 90.367736193], [23.806512454, 90.366180037], [23.806284920, 90.365608910], [23.805708563, 90.364530880], [23.805266828, 90.363785075], [23.804581657, 90.362557214], [23.804113475, 90.361878618], [23.803189231, 90.360481503], [23.802491005, 90.359400232], [23.801321912, 90.357550826], [23.800708459, 90.356611969], [23.800069779, 90.355596655], [23.799698028, 90.355054795], [23.799160172, 90.354150225], [23.798821781, 90.353618749], [23.798073525, 90.353317780], [23.796545555, 90.353383618], [23.795449863, 90.353451781], [23.794374280, 90.353539061], [23.792201597, 90.353744011], [23.789526259, 90.353900162], [23.788738490, 90.353903847], [23.787711024, 90.353936942], [23.786842819, 90.353970212], [23.785438933, 90.353933098], [23.784809733, 90.353657817], [23.783433811, 90.352843939], [23.782259884, 90.352158046], [23.782026071, 90.351979298], [23.781850067, 90.351693288], [23.781820221, 90.351375996], [23.782194534, 90.350542063], [23.782532586, 90.349684451], [23.782715496, 90.348913948], [23.782749936, 90.348538623], [23.782876199, 90.347756194], [23.782962844, 90.346967043], [23.783195162, 90.345214204], [23.783307454, 90.344298542], [23.783300311, 90.343992607], [23.783264965, 90.343350295], [23.783236779, 90.342333024], [23.783091049, 90.340645001], [23.783029578, 90.339744896], [23.783049858, 90.339091025], [23.783201288, 90.338164407], [23.783442580, 90.337388635], [23.783700498, 90.336598429], [23.784606683, 90.334067464], [23.785409544, 90.331838208], [23.785420161, 90.331807033], [23.785898643, 90.330432437], [23.786431672, 90.329237532], [23.786942808, 90.328427554], [23.787935405, 90.327175347], [23.788980895, 90.325782122], [23.789669549, 90.324796239], [23.790008267, 90.323889011], [23.790174519, 90.323176562], [23.790217325, 90.321863973], [23.790120365, 90.320751015], [23.789992564, 90.319801438], [23.789793330, 90.317872552], [23.789834050, 90.315179784], [23.789875563, 90.314572097], [23.790128688, 90.312746701], [23.790290355, 90.311972078], [23.790694465, 90.309987488], [23.790910779, 90.308957782], [23.791550006, 90.305624820], [23.791780514, 90.304484026], [23.792248768, 90.302307075], [23.792571477, 90.300966075], [23.792778732, 90.300293124], [23.793195647, 90.298804334], [23.793513041, 90.297612468], [23.794087470, 90.295513648], [23.794388060, 90.294394176], [23.794652445, 90.293411540], [23.794878125, 90.292344993], [23.795169927, 90.290359147], [23.795241203, 90.289576569], [23.795317077, 90.288475762], [23.795326596, 90.287535727], [23.795316371, 90.286896670], [23.795245764, 90.284326173], [23.795176553, 90.283474158], [23.795000858, 90.281610787], [23.794914335, 90.280914591], [23.794706161, 90.279602365], [23.794603864, 90.279098909], [23.794029935, 90.276428883], [23.793798065, 90.275158710], [23.793424443, 90.273264006], [23.793217748, 90.271709384], [23.793200338, 90.271074672], [23.793467415, 90.269578195], [23.793934354, 90.268126044], [23.794391575, 90.267272127], [23.795048828, 90.266248385], [23.795435724, 90.265824229], [23.796604563, 90.264596766], [23.797557684, 90.263954044], [23.798840873, 90.263349171], [23.799804850, 90.263115350], [23.801747968, 90.262565518], [23.802614174, 90.262332187], [23.804065614, 90.261631012], [23.806736808, 90.260287762], [23.810195239, 90.258320455], [23.811915574, 90.257490034], [23.812955104, 90.257342030], [23.814638883, 90.257303072], [23.816926008, 90.257385898], [23.820244438, 90.257518049], [23.821217125, 90.257562913], [23.824264499, 90.257922521], [23.825070017, 90.258052992], [23.827373127, 90.258387968], [23.829463032, 90.258665436], [23.830580416, 90.258777670], [23.833186342, 90.259070479], [23.835283136, 90.258953233], [23.837495622, 90.258376020], [23.839791173, 90.257655076], [23.842108431, 90.256969407], [23.843983483, 90.256563174], [23.843998592, 90.256561179], [23.845253044, 90.256644995], [23.846026327, 90.256900037], [23.847331592, 90.257372033], [23.849223525, 90.258026913], [23.849968868, 90.258289842], [23.852210049, 90.259129139], [23.853882387, 90.259854217], [23.855820606, 90.260883966], [23.858195923, 90.262146327], [23.858859961, 90.262548679], [23.859801626, 90.263221769], [23.860595492, 90.264199998], [23.861380549, 90.265464996], [23.861990354, 90.266177444], [23.863038002, 90.267405173], [23.865256914, 90.269820331], [23.866565432, 90.270975919], [23.868348770, 90.272041189], [23.869759040, 90.272647619], [23.872387634, 90.273060683], [23.876563191, 90.273252398], [23.881548845, 90.272821018], [23.887776804, 90.272399775], [23.889662080, 90.272072871], [23.889583767, 90.271361012], [23.888305271, 90.269887522], [23.886493861, 90.267819854], [23.883732493, 90.267811723], [23.881050729, 90.267798554], [23.879785000, 90.267799170], [23.878862041, 90.267819546]
      ], schedule: "Mirpur 12 ↔ JU Campus" },  // Mirpur 12 to JU Campus
      { name: "Route 3", color: "green", coords: [
        [23.758445731, 90.376027297], [23.758393409, 90.375043878], [23.758380401, 90.374323172], [23.758472215, 90.374023093], [23.759046049, 90.373629968], [23.761666307, 90.372076594], [23.763243864, 90.371207254], [23.764095374, 90.370811861], [23.765707924, 90.370142315], [23.767816102, 90.369350079], [23.770040652, 90.368480509], [23.772041666, 90.367713740], [23.773358183, 90.367123172], [23.774095607, 90.366446334], [23.774896081, 90.365596025], [23.775603961, 90.364683792], [23.776385833, 90.363606901], [23.777192065, 90.362370709], [23.778067659, 90.360969921], [23.778496916, 90.360038705], [23.778900210, 90.358032604], [23.779073817, 90.356781473], [23.779307666, 90.356155480], [23.780120075, 90.354560609], [23.781092487, 90.352663210], [23.781554443, 90.351826192], [23.782009884, 90.350840033], [23.782678300, 90.348982071], [23.782870364, 90.347654179], [23.783063936, 90.346211060], [23.783290488, 90.344238530], [23.783231884, 90.342451319], [23.783092242, 90.340828998], [23.783034283, 90.340071001], [23.783034052, 90.339022863], [23.783207729, 90.338133458], [23.783511871, 90.337075829], [23.783748449, 90.336237854], [23.784484838, 90.334254196], [23.785724465, 90.330789235], [23.785773406, 90.330732006], [23.786595079, 90.328943334], [23.787875598, 90.327252538], [23.787914716, 90.327208563], [23.789558360, 90.324884930], [23.790187211, 90.323123431], [23.790133392, 90.321226269], [23.790013636, 90.320093619], [23.789841597, 90.318650178], [23.789775608, 90.317611467], [23.789840403, 90.315224404], [23.790170219, 90.312537118], [23.790183503, 90.312426112], [23.790477903, 90.311057199], [23.791081725, 90.308054093], [23.791447211, 90.306219541], [23.791816942, 90.304215033], [23.792247034, 90.302306916], [23.793011779, 90.299357253], [23.793523614, 90.297502689], [23.794088929, 90.295483194], [23.794481666, 90.293995806], [23.794992840, 90.291474862], [23.795238107, 90.289924447], [23.795276786, 90.289147990], [23.795300141, 90.286346921], [23.795172474, 90.283866300], [23.794832824, 90.280585517], [23.794480637, 90.278738491], [23.794219228, 90.277467100], [23.793742555, 90.275151244], [23.793299744, 90.272879233], [23.793148955, 90.270994740], [23.793473153, 90.269483251], [23.794355725, 90.267300315], [23.795734645, 90.265476932], [23.795845986, 90.265287987], [23.797785676, 90.263788090], [23.798218846, 90.263561664], [23.798953331, 90.263332975], [23.799796226, 90.263138578], [23.800838121, 90.262847443], [23.801840004, 90.262568124], [23.802690499, 90.262273672], [23.803502197, 90.261910745], [23.804848578, 90.261227692], [23.806393419, 90.260448955], [23.806989320, 90.260141251], [23.808421630, 90.259358852], [23.810246930, 90.258312895], [23.811723220, 90.257542125], [23.812710715, 90.257296102], [23.814080604, 90.257298314], [23.816237636, 90.257392679], [23.817247630, 90.257402125], [23.820628562, 90.257523227], [23.825470787, 90.258092704], [23.829635689, 90.258704405], [23.833518495, 90.259084446], [23.835824035, 90.258846891], [23.837221140, 90.258465235], [23.839825413, 90.257639050], [23.842467369, 90.256878171], [23.843944698, 90.256579033], [23.845066363, 90.256632692], [23.847861908, 90.257611300], [23.851231908, 90.258771468], [23.854009954, 90.259887008], [23.855699194, 90.260812965], [23.856837084, 90.261414804], [23.857053490, 90.261516957], [23.857557784, 90.261810285], [23.858728601, 90.262453525], [23.859696849, 90.263161996], [23.860659456, 90.264225584], [23.861284603, 90.265227723], [23.862445045, 90.266707104], [23.863825033, 90.268249079], [23.866487877, 90.270930600], [23.868335679, 90.272054628], [23.870224139, 90.272753050], [23.871519387, 90.272961950], [23.874316776, 90.273279735], [23.876597961, 90.273282438], [23.878936629, 90.273078969], [23.879852893, 90.272986506], [23.879851832, 90.271294948], [23.879827089, 90.269388441], [23.879861908, 90.268737861], [23.879510480, 90.268470464], [23.878878005, 90.267838720], [23.878811959, 90.267866607]
      ], schedule: "Manik Mia Avenue ↔ JU Campus" },  // Manik Mia Avenue to JU Campus
      { name: "Route 4", color: "orange", coords: [
        [23.748957463, 90.419232543], [23.749232386, 90.417039887], [23.749966299, 90.412860142], [23.749163463, 90.412568660], [23.747855171, 90.412530863], [23.745894051, 90.412384607], [23.745826345, 90.412386584], [23.745664117, 90.412183196], [23.745677619, 90.412153046], [23.746179122, 90.411376429], [23.747464354, 90.409846231], [23.747505137, 90.409755830], [23.748477620, 90.408531956], [23.748519020, 90.408485570], [23.749003856, 90.407444461], [23.749208685, 90.406039392], [23.749071327, 90.404934314], [23.748824876, 90.404210000], [23.748631646, 90.403615264], [23.748314519, 90.402636719], [23.747862069, 90.401326989], [23.747507718, 90.400384605], [23.746862480, 90.398208846], [23.746484152, 90.396794913], [23.746261495, 90.395873096], [23.745948052, 90.394968611], [23.745967534, 90.394645880], [23.747072355, 90.394248660], [23.749287888, 90.393500561], [23.749941971, 90.393207256], [23.751634185, 90.392639229], [23.751695576, 90.392591187], [23.753696283, 90.391852057], [23.755924515, 90.390979812], [23.757643334, 90.390336373], [23.758312144, 90.390022449], [23.758500165, 90.389662737], [23.758420765, 90.388887624], [23.758341434, 90.387897963], [23.758242445, 90.386781371], [23.758104199, 90.385475406], [23.758084323, 90.384551402], [23.758143275, 90.383987583], [23.758459290, 90.383467531], [23.758538512, 90.383029167], [23.758498470, 90.381387593], [23.758362025, 90.379281642], [23.758342154, 90.377484986], [23.758206168, 90.375850632], [23.758225170, 90.374611819], [23.758399420, 90.374062666], [23.759727194, 90.373230512], [23.761864760, 90.371928508], [23.763603038, 90.371043329], [23.765152893, 90.370357957], [23.767458714, 90.369462413], [23.767539433, 90.369434182], [23.769638015, 90.368689091], [23.771253707, 90.367988631], [23.773340993, 90.367097163], [23.775446002, 90.364870405], [23.775488336, 90.364777925], [23.776730177, 90.363081529], [23.777435991, 90.361968239], [23.778307997, 90.360440384], [23.778803637, 90.358877696], [23.778824790, 90.358853839], [23.779057412, 90.356913555], [23.779334059, 90.356036793], [23.780001548, 90.354728221], [23.780678649, 90.353350137], [23.781159669, 90.352439907], [23.781496737, 90.351871944], [23.782001210, 90.350863872], [23.782564411, 90.349250638], [23.782689100, 90.348398528], [23.783062970, 90.346083455], [23.783206818, 90.344793440], [23.783268480, 90.344015782], [23.783143271, 90.341525544], [23.783039668, 90.340411330], [23.782997740, 90.339033736], [23.783182742, 90.337916539], [23.783984371, 90.335727129], [23.784605540, 90.334058545], [23.785507577, 90.331325533], [23.786038900, 90.330003114], [23.786733524, 90.328685496], [23.787832993, 90.327261958], [23.789071230, 90.325622760], [23.789769707, 90.324444934], [23.790025585, 90.323568115], [23.790174676, 90.322146384], [23.790131266, 90.321296020], [23.789830222, 90.319053681], [23.789765334, 90.317557616], [23.789891499, 90.314772694], [23.790040302, 90.313278988], [23.790799034, 90.309388260], [23.791220916, 90.307231363], [23.792173985, 90.302659290], [23.792698818, 90.300563075], [23.793562422, 90.297392247], [23.793915566, 90.296118641], [23.794764730, 90.292734246], [23.795095323, 90.290958672], [23.795259147, 90.289302460], [23.795277179, 90.286318963], [23.795234832, 90.284870161], [23.795047834, 90.282354584], [23.794677383, 90.279389439], [23.794006670, 90.276467023], [23.793523453, 90.273940577], [23.793182488, 90.270950004], [23.793202279, 90.270905338], [23.793538986, 90.269276581], [23.794828506, 90.266574464], [23.796170564, 90.265022683], [23.796897939, 90.264373263], [23.798367902, 90.263535977], [23.800359625, 90.262995179], [23.802422024, 90.262383130], [23.803905194, 90.261708511], [23.806663179, 90.260331371], [23.810961210, 90.257893919], [23.812418916, 90.257403654], [23.816567350, 90.257384074], [23.821738817, 90.257593617], [23.823386756, 90.257768618], [23.827016287, 90.258377652], [23.829224725, 90.258608993], [23.831140027, 90.258876143], [23.833255239, 90.259075107], [23.835570182, 90.258929332], [23.837544978, 90.258343380], [23.841829511, 90.257055583], [23.843948199, 90.256560175], [23.845418761, 90.256685249], [23.847171417, 90.257339052], [23.849132748, 90.258046068], [23.850609116, 90.258531463], [23.852912818, 90.259419114], [23.854979887, 90.260433484], [23.857923850, 90.262029951], [23.859475670, 90.262972837], [23.860907082, 90.264736099], [23.862304801, 90.266563083], [23.864488206, 90.268974523], [23.865822714, 90.270325307], [23.866970365, 90.271271889], [23.868345601, 90.272024158], [23.870018204, 90.272696910], [23.872217517, 90.273077310], [23.874850368, 90.273264834], [23.875942523, 90.273269122], [23.875927725, 90.272973835], [23.875811611, 90.272300693], [23.875775619, 90.272133982], [23.875767796, 90.271415948], [23.875731607, 90.270895661], [23.875533610, 90.270578502], [23.875243433, 90.270166694], [23.874855512, 90.269590008], [23.874782808, 90.268704490], [23.874756017, 90.267882856], [23.875254841, 90.267853450], [23.875525232, 90.267836617], [23.876149545, 90.267784400], [23.876773427, 90.267787758], [23.877986452, 90.267795309], [23.878803958, 90.267832377]
      ], schedule: "Khilgaon ↔ JU Campus" },  // Khilgaon to JU Campus
      { name: "Route 5", color: "purple", coords: [
        [23.819437044, 90.415757619], [23.821100749, 90.418336689], [23.821221076, 90.418372654], [23.822466171, 90.419688948], [23.822527459, 90.419755291], [23.823857796, 90.420298223], [23.825068818, 90.420506609], [23.827386374, 90.420273742], [23.831033133, 90.419708168], [23.833567386, 90.419144583], [23.837101626, 90.418492334], [23.839512643, 90.417408947], [23.842069557, 90.415680709], [23.842131549, 90.415615997], [23.843698668, 90.414238324], [23.847794975, 90.410864519], [23.850313274, 90.408669806], [23.854870785, 90.404867935], [23.856782278, 90.403307148], [23.860787860, 90.400248438], [23.862995780, 90.399926549], [23.866749609, 90.400264491], [23.868977427, 90.400491805], [23.873508514, 90.400570752], [23.875116974, 90.400585507], [23.877051392, 90.401017914], [23.879231516, 90.401215329], [23.880578160, 90.400998307], [23.880741659, 90.400113884], [23.880263800, 90.398075335], [23.879759520, 90.395803291], [23.879547969, 90.394042193], [23.879633488, 90.392717821], [23.879977227, 90.392261818], [23.882759587, 90.391419232], [23.885313278, 90.390539987], [23.888245004, 90.389489482], [23.890128766, 90.389053526], [23.890250057, 90.389043516], [23.891289291, 90.388607550], [23.892531245, 90.387988305], [23.893922121, 90.386892821], [23.895381208, 90.385547759], [23.896418304, 90.384616637], [23.897085925, 90.383580851], [23.897341804, 90.382710407], [23.897622033, 90.381426862], [23.897590480, 90.380400812], [23.897152060, 90.379192856], [23.896406419, 90.377819139], [23.895638040, 90.377007098], [23.894907775, 90.376317518], [23.894425090, 90.375574631], [23.894035150, 90.374357010], [23.893945035, 90.373061374], [23.894124038, 90.371443991], [23.894273517, 90.369951600], [23.894333061, 90.368793182], [23.893973475, 90.367794826], [23.893466875, 90.366366539], [23.893259269, 90.365293821], [23.893199873, 90.364301683], [23.892757498, 90.363080134], [23.892288869, 90.361978839], [23.891006154, 90.360996773], [23.889618885, 90.360508878], [23.887978475, 90.360088650], [23.886696848, 90.359954865], [23.885673911, 90.360300071], [23.884526895, 90.360593093], [23.883141310, 90.360509225], [23.882145869, 90.360214470], [23.881439455, 90.359802998], [23.880808555, 90.359260750], [23.880372986, 90.358674691], [23.879269262, 90.357018105], [23.878006496, 90.355404533], [23.877030408, 90.354313724], [23.876147772, 90.353319969], [23.875445151, 90.352957588], [23.874040250, 90.352719632], [23.872500660, 90.352793310], [23.871431957, 90.352920376], [23.870015544, 90.353078537], [23.869113237, 90.353131432], [23.868559310, 90.352828515], [23.867373659, 90.352283673], [23.865789674, 90.351760847], [23.864404799, 90.351002722], [23.862805641, 90.350109812], [23.861622466, 90.349359950], [23.860081438, 90.348508520], [23.858033780, 90.346831081], [23.856464565, 90.345464173], [23.855014869, 90.344198431], [23.853250498, 90.342688302], [23.852153938, 90.341784066], [23.850840498, 90.341094670], [23.848716995, 90.340235585], [23.847530949, 90.339927011], [23.846669816, 90.340046369], [23.845612195, 90.340839816], [23.845014129, 90.341307091], [23.843774011, 90.342221182], [23.842805251, 90.342896339], [23.842111968, 90.343147495], [23.841417107, 90.343092276], [23.840673177, 90.342743731], [23.839764110, 90.341869038], [23.838587767, 90.340755310], [23.837955546, 90.340258011], [23.836721277, 90.340074662], [23.835303319, 90.340108070], [23.833375537, 90.340229617], [23.832118017, 90.340479324], [23.831390350, 90.340742621], [23.830982945, 90.341036808], [23.830279067, 90.341989125], [23.829563140, 90.342718218], [23.829122366, 90.343064601], [23.828863612, 90.343513024], [23.828780091, 90.344096045], [23.828655076, 90.344600486], [23.828313136, 90.345059747], [23.827790766, 90.345209717], [23.827404931, 90.345266969], [23.826854740, 90.345127027], [23.826271425, 90.344892644], [23.825698022, 90.344495227], [23.825251757, 90.344152480], [23.824474105, 90.343405590], [23.823961246, 90.342898952], [23.823419481, 90.342355107], [23.823025307, 90.342069380], [23.822539129, 90.341763494], [23.821954896, 90.341460499], [23.821281691, 90.341333824], [23.820506477, 90.341376202], [23.819426065, 90.341588730], [23.818841476, 90.341812619], [23.818400094, 90.341861671], [23.817601132, 90.341791141], [23.817056326, 90.341628739], [23.815992262, 90.341235659], [23.815469594, 90.341057496], [23.814056961, 90.340587508], [23.814023190, 90.340595656], [23.813603208, 90.340492177], [23.812618442, 90.340274850], [23.811989975, 90.340150324], [23.811297072, 90.340163139], [23.810127213, 90.340286566], [23.809201871, 90.340406789], [23.808297086, 90.340583706], [23.807746084, 90.340933092], [23.806796915, 90.341872868], [23.806099718, 90.342567140], [23.805360244, 90.343083334], [23.804818221, 90.343394882], [23.803733064, 90.343642326], [23.802980779, 90.343790474], [23.802535910, 90.343853269], [23.801830033, 90.343954689], [23.801440385, 90.344013907], [23.800752062, 90.344047762], [23.800188964, 90.343997198], [23.799775548, 90.343883779], [23.799099126, 90.343661756], [23.798628139, 90.343519137], [23.798526548, 90.343490582], [23.798479412, 90.343583981], [23.798444414, 90.343877884], [23.798438727, 90.344219369], [23.798468074, 90.344510450], [23.798433171, 90.344858128], [23.798444982, 90.345218592], [23.798398662, 90.345619028], [23.798244496, 90.346191685], [23.798022546, 90.346546077], [23.797814990, 90.346747342], [23.797457545, 90.346970209], [23.797203263, 90.347092135], [23.796761372, 90.347278746], [23.796184780, 90.347533606], [23.795823091, 90.347679336], [23.795564604, 90.347835173], [23.795277671, 90.348088822], [23.795132295, 90.348382024], [23.795132303, 90.348402560], [23.795064352, 90.348710125], [23.795010517, 90.348900842], [23.794184154, 90.348786502], [23.794163439, 90.348784169], [23.793598219, 90.348720523], [23.792398009, 90.348576246], [23.791463735, 90.348463568], [23.790996914, 90.348389892], [23.789842803, 90.348249391], [23.788199306, 90.348038199], [23.786295649, 90.347736880], [23.784779816, 90.347500014], [23.783055018, 90.347216985], [23.782959518, 90.347185784], [23.782934245, 90.347009200], [23.783061026, 90.346195703], [23.783183965, 90.345173507], [23.783296172, 90.344220836], [23.783249018, 90.342977872], [23.783222308, 90.342424871], [23.783097483, 90.340976282], [23.783032555, 90.339631995], [23.783064368, 90.339041803], [23.783233511, 90.337931485], [23.783587427, 90.336761409], [23.783896547, 90.335993396], [23.784406636, 90.334573441], [23.784758351, 90.333595034], [23.785277660, 90.332098884], [23.785609467, 90.331356250], [23.785609457, 90.331335043], [23.785609423, 90.331267792], [23.785839586, 90.330569743], [23.786237489, 90.329731999], [23.786505738, 90.329082383], [23.787118901, 90.328163120], [23.787821386, 90.327236266], [23.789013832, 90.325737538], [23.789709395, 90.324709259], [23.790099793, 90.323788996], [23.790302691, 90.322592330], [23.790353921, 90.321693719], [23.790332757, 90.320898388], [23.790137632, 90.319595619], [23.790007250, 90.319000173], [23.789859246, 90.317738092], [23.789838318, 90.315223299], [23.790023737, 90.313425366], [23.790296281, 90.311891025], [23.790224584, 90.312227362], [23.790399925, 90.311407242], [23.790654550, 90.310163436], [23.791076808, 90.308119034], [23.791289430, 90.307154557], [23.791608632, 90.305522826], [23.791851601, 90.304414286], [23.792182206, 90.302710950], [23.792496145, 90.301371288], [23.792910791, 90.299756779], [23.793347503, 90.298244886], [23.793629158, 90.297250011], [23.793805764, 90.296666799], [23.794149069, 90.295339860], [23.794459904, 90.294038941], [23.794862040, 90.292358803], [23.795022384, 90.291542016], [23.795206742, 90.290159983], [23.795298042, 90.288957268], [23.795321847, 90.288340729], [23.795337207, 90.287241334], [23.795287499, 90.285803246], [23.795157968, 90.283624471], [23.795023308, 90.281691363], [23.794778832, 90.280197954], [23.794464775, 90.278615064], [23.794165908, 90.277146566], [23.793868182, 90.275656677], [23.793572421, 90.274102538], [23.793283912, 90.272645359], [23.793211413, 90.271523685], [23.793301807, 90.270682142], [23.793575838, 90.269320678], [23.793979414, 90.268173056], [23.794387679, 90.267290591], [23.795013733, 90.266345621], [23.796054707, 90.265247297], [23.796629480, 90.264712788], [23.797507740, 90.263989431], [23.797541921, 90.263965620], [23.798644630, 90.263450256], [23.800466408, 90.262949870], [23.802528814, 90.262321797], [23.804451336, 90.261410108], [23.806051172, 90.260628545], [23.807848167, 90.259670026], [23.810436647, 90.258210187], [23.811585632, 90.257604646], [23.812755530, 90.257306880], [23.813880196, 90.257303335], [23.815359806, 90.257346858], [23.815985365, 90.257374893], [23.818393680, 90.257437850], [23.821738817, 90.257593617], [23.823386756, 90.257768618], [23.827016287, 90.258377652], [23.829224725, 90.258608993], [23.831140027, 90.258876143], [23.833255239, 90.259075107], [23.835570182, 90.258929332], [23.837544978, 90.258343380], [23.841829511, 90.257055583], [23.843948199, 90.256560175], [23.845418761, 90.256685249], [23.847171417, 90.257339052], [23.849132748, 90.258046068], [23.850609116, 90.258531463], [23.852912818, 90.259419114], [23.854979887, 90.260433484], [23.857923850, 90.262029951], [23.859475670, 90.262972837], [23.860907082, 90.264736099], [23.862304801, 90.266563083], [23.864488206, 90.268974523], [23.865822714, 90.270325307], [23.866970365, 90.271271889], [23.868345601, 90.272024158], [23.870018204, 90.272696910], [23.872217517, 90.273077310], [23.874850368, 90.273264834], [23.875942523, 90.273269122], [23.875927725, 90.272973835], [23.875811611, 90.272300693], [23.875775619, 90.272133982], [23.875767796, 90.271415948], [23.875731607, 90.270895661], [23.875533610, 90.270578502], [23.875243433, 90.270166694], [23.874855512, 90.269590008], [23.874782808, 90.268704490], [23.874756017, 90.267882856], [23.875254841, 90.267853450], [23.875525232, 90.267836617], [23.876149545, 90.267784400], [23.876773427, 90.267787758], [23.877986452, 90.267795309], [23.878803958, 90.267832377] 
      ], schedule: "Khilghet ↔ JU Campus" },  // Khilghet to JU Campus
      { name: "Route 6", color: "pink", coords: [
        [23.797898804, 90.387432555], [23.798448709, 90.387289824], [23.798680439, 90.386522717], [23.799129342, 90.385151616], [23.799621305, 90.383921706], [23.800458656, 90.382022604], [23.801433741, 90.380486141], [23.802419092, 90.379341192], [23.802465764, 90.379253188], [23.802545984, 90.379200340], [23.802667207, 90.379127224], [23.803532504, 90.378126003], [23.804347189, 90.377054478], [23.806174328, 90.374564046], [23.807215993, 90.369839130], [23.807163081, 90.368942330], [23.806970583, 90.368178105], [23.806438614, 90.365905411], [23.805445938, 90.364040938], [23.803750034, 90.361295587], [23.801062876, 90.357105208], [23.799758888, 90.355097002], [23.799109123, 90.354046285], [23.798603307, 90.353448883], [23.797596902, 90.353299509], [23.796416804, 90.353374389], [23.795123413, 90.353460080], [23.793149121, 90.353630680], [23.792317023, 90.353687666], [23.789815016, 90.353862785], [23.789044281, 90.353867197], [23.785467505, 90.353944694], [23.784765408, 90.353656777], [23.784571919, 90.353522696], [23.783129761, 90.352636860], [23.782012042, 90.351962166], [23.781804359, 90.351435076], [23.782160293, 90.350511645], [23.782449645, 90.349729717], [23.782915183, 90.347147772], [23.783302034, 90.344276678], [23.783059138, 90.340194781], [23.783098734, 90.338486070], [23.783853020, 90.336057304], [23.785058829, 90.332948094], [23.786694981, 90.328812856], [23.789830230, 90.324427048], [23.790257609, 90.322527958], [23.790225017, 90.321123930], [23.790001259, 90.319479525], [23.789796067, 90.317027079], [23.789904456, 90.314295916], [23.790382269, 90.311509077], [23.791078088, 90.308113714], [23.791860233, 90.304112290], [23.792758964, 90.300336162], [23.793822032, 90.296566798], [23.794603281, 90.293494897], [23.795169631, 90.290207063], [23.795287199, 90.286775440], [23.795062837, 90.282201326], [23.794365630, 90.277924552], [23.793730908, 90.274924570], [23.793332373, 90.272848635], [23.793210988, 90.270984816], [23.793588169, 90.269334336], [23.794229506, 90.267642520], [23.795272825, 90.266030591], [23.796197150, 90.264979661], [23.797603756, 90.263960261], [23.798605265, 90.263453972], [23.800389717, 90.262980768], [23.802052686, 90.262535520], [23.803508692, 90.261881257], [23.805792178, 90.260772372], [23.806876513, 90.260225346], [23.811398102, 90.257732684], [23.812558951, 90.257379303], [23.814674623, 90.257378183], [23.818181315, 90.257414210], [23.819254739, 90.257449050], [23.823435926, 90.257769197], [23.827173494, 90.258362285], [23.830934761, 90.258835965], [23.834640689, 90.259048224], [23.838692994, 90.257994830], [23.841627373, 90.257104493], [23.844395526, 90.256575209], [23.847167848, 90.257296119], [23.850257077, 90.258342024], [23.853286640, 90.259551925], [23.856380242, 90.261219996], [23.859389714, 90.262947352], [23.861206599, 90.265196261], [23.862040263, 90.266283876], [23.865096399, 90.269654874], [23.866885013, 90.271191110], [23.868138245, 90.271936078], [23.871741668, 90.272982419], [23.873756874, 90.273225023], [23.875973986, 90.273255104], [23.875847817, 90.272553156], [23.875780034, 90.272196830], [23.875723203, 90.270927166], [23.874895015, 90.269616514], [23.874770441, 90.267890769], [23.875445432, 90.267850602], [23.876986410, 90.267814317], [23.878407647, 90.267802775], [23.878905131, 90.267824215], [23.878917452, 90.268132156]
      ], schedule: "Mirpur 14 ↔ JU Campus" },  // Mirpur 14 to JU Campus
      { name: "Route 7", color: "yellow", coords: [
        [23.724456680, 90.404986543], [23.724466709, 90.404942722], [23.724637204, 90.404668845], [23.724907993, 90.404625023], [23.724938080, 90.404625022], [23.725359307, 90.404548332], [23.725399424, 90.404526422], [23.725439540, 90.404515466], [23.726582874, 90.404340169], [23.726612961, 90.404340169], [23.728057188, 90.404033393], [23.728194831, 90.403416380], [23.728124086, 90.402276814], [23.728106376, 90.400944087], [23.728265495, 90.400190789], [23.729308713, 90.399070425], [23.731059245, 90.397351124], [23.732125013, 90.396345683], [23.732902978, 90.395650242], [23.732920659, 90.395630924], [23.734777274, 90.395437607], [23.737164395, 90.395611231], [23.737747923, 90.395707755], [23.738154608, 90.395302042], [23.738750144, 90.390986543], [23.739050534, 90.388436545], [23.738908582, 90.384755401], [23.738837700, 90.383480430], [23.742027166, 90.382669795], [23.744679454, 90.382012422], [23.747321420, 90.380506216], [23.749337068, 90.379346617], [23.751447047, 90.378094445], [23.753250490, 90.377050753], [23.756777320, 90.374993247], [23.758368592, 90.374084759], [23.762626426, 90.371545195], [23.765278549, 90.370346525], [23.769206596, 90.368780428], [23.773411567, 90.367148131], [23.774843490, 90.365659810], [23.777558972, 90.361835253], [23.778460324, 90.360173075], [23.779095765, 90.356633605], [23.779873323, 90.355029404], [23.781508110, 90.351911732], [23.782655559, 90.349051594], [23.782920142, 90.347215695], [23.783290306, 90.344240144], [23.783218929, 90.342539631], [23.783058836, 90.340376385], [23.783075926, 90.338927081], [23.783871296, 90.336162326], [23.784683682, 90.333900928], [23.786372980, 90.329430980], [23.786814612, 90.328541778], [23.788658053, 90.326203228], [23.789435554, 90.325139828], [23.790159468, 90.323143664], [23.790176343, 90.321558926], [23.789927406, 90.319145357], [23.789838370, 90.317985882], [23.790188824, 90.312550131], [23.790576693, 90.310678331], [23.791352365, 90.306891001], [23.792171809, 90.302738487], [23.793300603, 90.298362443], [23.794413443, 90.294340499], [23.795065296, 90.291072347], [23.795241005, 90.289526085], [23.795273410, 90.285659238], [23.794987204, 90.281508395], [23.794738526, 90.280078502], [23.794170175, 90.277050766], [23.793335513, 90.272779720], [23.793210452, 90.271272432], [23.793826903, 90.268523272], [23.794656619, 90.266976315], [23.795875320, 90.265370857], [23.798043538, 90.263678764], [23.800023441, 90.263116104], [23.801861983, 90.262611528], [23.805425101, 90.260933050], [23.810318945, 90.258260276], [23.811998081, 90.257465803], [23.814239856, 90.257308678], [23.818324555, 90.257400660], [23.820022194, 90.257495317], [23.822786751, 90.257704888], [23.825881622, 90.258145910], [23.829712091, 90.258624894], [23.831445239, 90.258893524], [23.834270029, 90.259064381], [23.836320883, 90.258714025], [23.838751204, 90.257976676], [23.840872571, 90.257374855], [23.842611134, 90.256860392], [23.844791181, 90.256587232], [23.846294583, 90.256991479], [23.848586405, 90.257820266], [23.850249077, 90.258379022], [23.851562000, 90.258822241], [23.851827343, 90.258937940], [23.852198799, 90.259072850], [23.852446407, 90.259130566], [23.852534891, 90.259207801], [23.852729471, 90.259284913], [23.853964167, 90.259805576], [23.855167224, 90.260519568], [23.856579724, 90.261310735], [23.858631823, 90.262391165], [23.859870429, 90.263337172], [23.859905863, 90.263414470], [23.860613939, 90.264283739], [23.861056607, 90.264959961], [23.862472813, 90.266712860], [23.863623271, 90.267987721], [23.864472879, 90.268972898], [23.866107590, 90.270596566], [23.867239933, 90.271407472], [23.868637495, 90.272198777], [23.870349445, 90.272796438], [23.872117867, 90.273065326], [23.875928683, 90.273274137], [23.875845603, 90.272588100], [23.875769415, 90.272211597], [23.875724208, 90.270878894], [23.875351676, 90.270313426], [23.874852559, 90.269601652], [23.874763520, 90.268599211], [23.874745329, 90.267885637], [23.875472408, 90.267836461], [23.876090911, 90.267807942], [23.878298530, 90.267795794], [23.878873490, 90.267795494], [23.878900994, 90.268017390]
      ], schedule: "Bangabazar ↔ JU Campus" }  // Bangabazar to JU Campus
    ];

    // Add routes to the map
    routes.forEach(route => {
      L.polyline(route.coords, { color: route.color, weight: 5 }).addTo(map);

      // Add origin and destination markers
      const originIcon = L.divIcon({ className: 'origin-icon', html: `<span style="font-size: 15px; color: #4caf50;">🚍</span>` }); 
      const destinationIcon = L.divIcon({ className: 'destination-icon', html: `<span style="font-size: 20px; color: #f44336;">🏛️</span>` }); 

      // Origin marker
      L.marker(route.coords[0], { icon: originIcon }).addTo(map)
        .bindPopup(`<strong>${route.name} - Origin</strong><br>Schedule: ${route.schedule}`);

      // Destination marker
      L.marker(route.coords[route.coords.length - 1], { icon: destinationIcon }).addTo(map)
        .bindPopup(`<strong>${route.name} - Destination</strong><br>Schedule: ${route.schedule}`);
    });

    // Custom green bus icon
    const greenBusIcon = L.divIcon({
      className: 'green-bus-icon',
      html: `<span style="font-size: 18px; color: green;">🚌 </span>`
    });

    // Function to handle login and start tracking
    function loginDriver() {
      const name = document.getElementById("driver-name").value.trim();
      const phone = document.getElementById("driver-phone").value.trim();
      const email = document.getElementById("driver-email").value.trim();
      const routeIndex = document.getElementById("route-select").value;

      const status = document.getElementById("login-status");

      if (!name || !phone || !email || routeIndex === "") {
        status.textContent = "Please fill out all fields.";
        return;
      }

      status.textContent = `Welcome, ${name}! Starting location tracking for ${routes[routeIndex].name}.`;

      // Start tracking the user's location
      if (navigator.geolocation) {
        navigator.geolocation.watchPosition(
          (position) => {
            const { latitude, longitude } = position.coords;

            // Place or update the bus marker
            if (!window.busMarker) {
              window.busMarker = L.marker([latitude, longitude], { icon: greenBusIcon })
                .addTo(map)
                .bindPopup(`<strong>${name}</strong><br>Phone: ${phone}<br>Email: ${email}<br>Route: ${routes[routeIndex].name}`);
            } else {
              window.busMarker.setLatLng([latitude, longitude]).update();
            }
          },
          (error) => {
            console.error("Error accessing location: ", error);
            status.textContent = "Unable to access location. Please enable location services.";
          },
          { enableHighAccuracy: true }
        );
      } else {
        status.textContent = "Geolocation is not supported by this browser.";
      }
    }
  </script>
  
  
 
  
<!-- Bus Schedule Panel -->
<div class="floating-panel info-panel">
  <h5>Bus Schedule</h5>
  <select id="busScheduleDropdown" onchange="displayBusSchedule(this.value)">
    <option value="">Select a schedule</option>
    <option value="dhakaToCampus">Dhaka to Campus</option>
    <option value="campusToDhaka">Campus to Dhaka</option>
  </select>

  <div id="scheduleDetails" style="margin-top: 5px; display: none;">
    <h6 id="scheduleTitle"></h6>
    <select id="routeDropdown" onchange="handleRouteSelection(this.value)">
      <option value="">Select a route</option>
    </select>
  </div>
</div>





<script>




const schedules = {
  dhakaToCampus: {
    title: "Bus Schedule (Dhaka to Campus)",
    routes: [
      { name: "Route 1: Airport ↠ JU Campus <br> at 7:00 AM", coords: routes[0].coords, color: routes[0].color },
      { name: "Route 2: Mirpur 12 ↠ JU Campus <br> at 7:30 AM", coords: routes[1].coords, color: routes[1].color },
      { name: "Route 3: Manik Mia Avenue ↠ JU Campus <br> at 7:30 AM", coords: routes[2].coords, color: routes[2].color },
      { name: "Route 4: Khilgaon ↠ JU Campus <br> at 7:00 AM", coords: routes[3].coords, color: routes[3].color },
      { name: "Route 5: Khilghet ↠ JU Campus <br> at 7:15 AM", coords: routes[4].coords, color: routes[4].color },
      { name: "Route 6: Mirpur 14 ↠ JU Campus <br> at 7:15 AM", coords: routes[5].coords, color: routes[5].color },
      { name: "Route 7: Bangabazar ↠ JU Campus <br> at 7:15 AM, 5:00 PM, 6:00 PM, 7:30 PM, 8:30 PM", coords: routes[6].coords, color: routes[6].color }
    ]
  },
  campusToDhaka: {
    title: "Bus Schedule (Campus to Dhaka)",
    routes: [
      { name: "Route 1: JU Campus ↠ Airport <br> at 3:30 PM", coords: routes[0].coords, color: routes[0].color },
      { name: "Route 2: JU Campus ↠ Mirpur 12 <br> at 3:30 PM", coords: routes[1].coords, color: routes[1].color },
      { name: "Route 3: JU Campus ↠ Manik Mia Avenue <br> at 3:30 PM", coords: routes[2].coords, color: routes[2].color },
      { name: "Route 4: JU Campus ↠ Khilgaon <br> at 3:30 PM, 5:00 PM", coords: routes[3].coords, color: routes[3].color },
      { name: "Route 5: JU Campus ↠ Khilghet <br> at 5:00 PM", coords: routes[4].coords, color: routes[4].color },
      { name: "Route 6: JU Campus ↠ Mirpur 14 <br> at 5:00 PM", coords: routes[5].coords, color: routes[5].color },
      { name: "Route 7: JU Campus ↠ Bangabazar <br> at 3:00 PM, 5:00 PM, 8:00 PM", coords: routes[6].coords, color: routes[6].color }
    ]
  }
};

let activeRouteLayer = null;

function displayBusSchedule(scheduleKey) {
  const scheduleDetails = document.getElementById("scheduleDetails");
  const routeDropdown = document.getElementById("routeDropdown");
  const scheduleTitle = document.getElementById("scheduleTitle");

  if (scheduleKey) {
    const schedule = schedules[scheduleKey];
    scheduleDetails.style.display = "block";
    scheduleTitle.textContent = schedule.title;
    routeDropdown.innerHTML = '<option value="">Select a route</option>';
    schedule.routes.forEach(route => {
      const option = document.createElement("option");
      option.value = route.name; // Store the route name
      option.textContent = route.name.split(":")[0]; // Display only route name
      routeDropdown.appendChild(option);
    });
  } else {
    scheduleDetails.style.display = "none";
  }
}

function handleRouteSelection(selectedRoute) {
  if (selectedRoute) {
    // Find the selected route in the current schedule
    const scheduleKey = document.getElementById("busScheduleDropdown").value;
    const schedule = schedules[scheduleKey];
    const route = schedule.routes.find(r => r.name === selectedRoute);

    // Highlight the route on the map
    highlightRoute(route);

    // Show popup information
    //alert(`Selected Route: ${route.name}`);
  }
}

function highlightRoute(route) {
  if (activeRouteLayer) {
    // Remove the previous highlighted route layer
    map.removeLayer(activeRouteLayer);
  }

  activeRouteLayer = L.polyline(route.coords, {
    color: route.color,
    weight: 7,
    opacity: 1.1
  }).addTo(map);

  // Focus the map on the selected route
  map.fitBounds(activeRouteLayer.getBounds());

  // Add popup information for the selected route
  activeRouteLayer.bindPopup(`<strong>${route.name}</strong>`).openPopup();
}
</script>

  
  

  
  
  <!-- Environmental Information Panel -->
<div class="floating-panel environmental-panel">
  <h5>Environmental Info</h5>
  <p id="temperature">Temperature: Loading...</p>
  <p id="rainfall">Rainfall: Loading...</p>
  <p id="airQuality">Air Quality: Loading...</p>
  <p id="windPressure">Wind Pressure: Loading...</p>
</div>

<style>
  .environmental-panel {
    position: fixed; /* Change to fixed for proper positioning */
    top: 40px; /* Position from the top */
    right: 5px; /* Position from the right */
    background: linear-gradient(45deg, rgba(255, 105, 180, 0.7), rgba(0, 188, 212, 0.7)); /* Colorful gradient with transparency */
    padding: 5px;
    border-radius: 2px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    font-family: Arial, sans-serif;
    font-size: 10px;
    line-height: 1;
  }

  .environmental-panel h5 {
    margin: 0 0 10px;
    font-size: 12px;
    color: #ffffff; /* White text for better contrast */
  }
</style>
  



<script>
  // Updated API endpoints
  const weatherApiUrl = "https://api.open-meteo.com/v1/forecast";
  const airQualityApiUrl = "https://api.openweathermap.org/data/2.5/air_pollution";
  const openWeatherApiKey = "YOUR_OPENWEATHER_API_KEY"; // Replace with your OpenWeatherMap API key

  // Fetch environmental data
  function fetchEnvironmentalData(lat, lon) {
    // Fetch weather data (temperature, wind pressure, and precipitation probability)
    fetch(`${weatherApiUrl}?latitude=${lat}&longitude=${lon}&current_weather=true&daily=precipitation_probability_mean&timezone=auto`)
      .then(response => response.json())
      .then(data => {
        const { temperature, windspeed: windPressure } = data.current_weather;
        const rainfallProbability = data.daily.precipitation_probability_mean[0]; // Today's precipitation probability

        document.getElementById("temperature").textContent = `Temperature: ${temperature}°C`;
        document.getElementById("windPressure").textContent = `Wind Pressure: ${windPressure} m/s`;
        document.getElementById("rainfall").textContent = `Rainfall Probability: ${rainfallProbability}%`;
      })
      .catch(error => {
        console.error("Error fetching weather data:", error);
        document.getElementById("temperature").textContent = "Temperature: Unavailable";
        document.getElementById("windPressure").textContent = "Wind Pressure: Unavailable";
        document.getElementById("rainfall").textContent = "Rainfall Probability: Unavailable";
      });

    // Fetch air quality data
    fetch(`${airQualityApiUrl}?lat=${lat}&lon=${lon}&appid=${openWeatherApiKey}`)
      .then(response => response.json())
      .then(data => {
        if (data.list && data.list.length > 0) {
          const airQuality = data.list[0].main.aqi; // Air Quality Index (AQI)
          let airQualityText = "";

          switch (airQuality) {
            case 1:
              airQualityText = "Good";
              break;
            case 2:
              airQualityText = "Fair";
              break;
            case 3:
              airQualityText = "Moderate";
              break;
            case 4:
              airQualityText = "Poor";
              break;
            case 5:
              airQualityText = "Very Poor";
              break;
            default:
              airQualityText = "Unavailable";
          }

          document.getElementById("airQuality").textContent = `Air Quality: ${airQualityText}`;
        } else {
          document.getElementById("airQuality").textContent = "Air Quality: Unavailable";
        }
      })
      .catch(error => {
        console.error("Error fetching air quality data:", error);
        document.getElementById("airQuality").textContent = "Air Quality: Unavailable";
      });
  }

  // Call fetchEnvironmentalData with the center of the map
  map.on("load", () => {
    const center = map.getCenter();
    fetchEnvironmentalData(center.lat, center.lng);
  });

  // Fetch updated data on map move
  map.on("moveend", () => {
    const center = map.getCenter();
    fetchEnvironmentalData(center.lat, center.lng);
  });
</script>

  
  
</body>
</html>
